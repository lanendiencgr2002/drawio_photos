<mxfile host="Electron" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/24.7.5 Chrome/126.0.6478.183 Electron/31.3.0 Safari/537.36" version="24.7.5">
  <diagram name="第 1 页" id="0_EutU7pLvAgysZymis3">
    <mxGraphModel dx="1690" dy="1718" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" background="#FFF4C3" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="aNLpZGCZ1lWiJH4HFngb-1" value="SpringBoot是如何通过main方法启动web项目的？" style="text;whiteSpace=wrap;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=18;" vertex="1" parent="1">
          <mxGeometry x="-820" y="-1160" width="440" height="40" as="geometry" />
        </mxCell>
        <mxCell id="aNLpZGCZ1lWiJH4HFngb-4" value="SpringBoot的启动过程几个核心步骤：" style="text;whiteSpace=wrap;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=18;" vertex="1" parent="1">
          <mxGeometry x="-820" y="-1110" width="310" height="40" as="geometry" />
        </mxCell>
        <UserObject label="&lt;section id=&quot;markdown-section--4&quot; class=&quot;markdown-section&quot; data-markdown-raw=&quot;1. SpringApplication.run(): 这是启动的入口，它会创建 Spring 应用上下文，并执行自动配置。&quot; data-section-index=&quot;4&quot; style=&quot;border-radius: 4px; margin: 6px 0px; padding: 4px; position: relative; scroll-margin-bottom: 40px; scroll-margin-top: 40px; color: rgb(20, 20, 20); font-family: &amp;quot;Segoe WPC&amp;quot;, &amp;quot;Segoe UI&amp;quot;, &amp;quot;Microsoft YaHei&amp;quot;, sans-serif; font-size: 13px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; background-color: rgb(235, 235, 235); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;&quot;&gt;&lt;li value=&quot;1&quot; style=&quot;list-style-type: decimal; padding-left: 0px; padding-top: 2px; padding-bottom: 2px; margin-top: 0px; margin-bottom: 0px;&quot;&gt;&lt;span&gt;SpringApplication.run()&lt;/span&gt;&lt;span&gt;: 这是启动的&lt;/span&gt;&lt;span&gt;入口，它会创建&lt;/span&gt;&lt;span&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;Spring 应用上下&lt;/span&gt;&lt;span&gt;文，并执行自动&lt;/span&gt;&lt;span&gt;配置。&lt;/span&gt;&lt;/li&gt;&lt;/section&gt;&lt;section id=&quot;markdown-section--6&quot; class=&quot;markdown-section&quot; data-markdown-raw=&quot;2. 创建应用上下文: 为 Web 应用创建 AnnotationConfigServletWebServerApplicationContext 上下文。&quot; data-section-index=&quot;6&quot; style=&quot;border-radius: 4px; margin: 6px 0px; padding: 4px; position: relative; scroll-margin-bottom: 40px; scroll-margin-top: 40px; color: rgb(20, 20, 20); font-family: &amp;quot;Segoe WPC&amp;quot;, &amp;quot;Segoe UI&amp;quot;, &amp;quot;Microsoft YaHei&amp;quot;, sans-serif; font-size: 13px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; background-color: rgb(235, 235, 235); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;&quot;&gt;&lt;div class=&quot;markdown-section-toolbar&quot; style=&quot;animation: auto ease 0s 1 normal none running none !important;&quot;&gt;&lt;div style=&quot;animation: auto ease 0s 1 normal none running none !important; height: 0px; width: 948px;&quot;&gt;&lt;div class=&quot;markdown-section-toolbar-internal&quot; style=&quot;border-radius: 4px; display: flex; gap: 4px; opacity: 0; position: absolute; right: 8px; top: 0px; transform: translateY(-55%); z-index: 303; animation: auto ease 0s 1 normal none running none !important;&quot;&gt;&lt;div class=&quot;markdown-section-toolbar-item light&quot; style=&quot;align-items: center; border-radius: 3px; color: var(--vscode-foreground); cursor: pointer; display: flex; height: 20px; justify-content: center; opacity: 0.3; position: relative; width: 20px; animation: auto ease 0s 1 normal none running none !important;&quot;&gt;&lt;span class=&quot;codicon codicon-reply&quot; style=&quot;animation: auto ease 0s 1 normal none running none !important; display: inline-block; font: 14px / 1 codicon; text-align: center; text-decoration: none; text-rendering: auto; text-transform: none; -webkit-font-smoothing: antialiased; user-select: none;&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;markdown-section-toolbar-item markdown-section-toolbar-copy light&quot; style=&quot;align-items: center; border-radius: 3px; color: var(--vscode-foreground); cursor: pointer; display: flex; height: 20px; justify-content: center; opacity: 0.3; position: relative; width: 20px; animation: auto ease 0s 1 normal none running none !important; pointer-events: auto;&quot;&gt;&lt;span class=&quot;codicon codicon-copy&quot; style=&quot;animation: auto ease 0s 1 normal none running none !important; display: inline-block; font: 14px / 1 codicon; text-align: center; text-decoration: none; text-rendering: auto; text-transform: none; -webkit-font-smoothing: antialiased; user-select: none;&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;li value=&quot;2&quot; style=&quot;list-style-type: decimal; padding-left: 0px; padding-top: 2px; padding-bottom: 2px; margin-top: 0px; margin-bottom: 0px;&quot;&gt;&lt;span&gt;创&lt;/span&gt;&lt;span&gt;建应用上下文&lt;/span&gt;&lt;span&gt;: 为 Web 应用创建&lt;/span&gt;&lt;span&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;AnnotationConfigServletWebServerApplicationContext&lt;/span&gt;&lt;span&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;上下文。&lt;/span&gt;&lt;/li&gt;&lt;/section&gt;&lt;section id=&quot;markdown-section--8&quot; class=&quot;markdown-section&quot; data-markdown-raw=&quot;3. 启动内嵌 Web 服务器: 在 refreshContext() 阶段启动内嵌的 Web 服务器（如 Tomcat）。&quot; data-section-index=&quot;8&quot; style=&quot;border-radius: 4px; margin: 6px 0px; padding: 4px; position: relative; scroll-margin-bottom: 40px; scroll-margin-top: 40px; color: rgb(20, 20, 20); font-family: &amp;quot;Segoe WPC&amp;quot;, &amp;quot;Segoe UI&amp;quot;, &amp;quot;Microsoft YaHei&amp;quot;, sans-serif; font-size: 13px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; background-color: rgb(235, 235, 235); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;&quot;&gt;&lt;div class=&quot;markdown-section-toolbar&quot; style=&quot;animation: auto ease 0s 1 normal none running none !important;&quot;&gt;&lt;div style=&quot;animation: auto ease 0s 1 normal none running none !important; height: 0px; width: 948px;&quot;&gt;&lt;div class=&quot;markdown-section-toolbar-internal&quot; style=&quot;border-radius: 4px; display: flex; gap: 4px; opacity: 0; position: absolute; right: 8px; top: 0px; transform: translateY(-55%); z-index: 303; animation: auto ease 0s 1 normal none running none !important;&quot;&gt;&lt;div class=&quot;markdown-section-toolbar-item light&quot; style=&quot;align-items: center; border-radius: 3px; color: var(--vscode-foreground); cursor: pointer; display: flex; height: 20px; justify-content: center; opacity: 0.3; position: relative; width: 20px; animation: auto ease 0s 1 normal none running none !important;&quot;&gt;&lt;span class=&quot;codicon codicon-reply&quot; style=&quot;animation: auto ease 0s 1 normal none running none !important; display: inline-block; font: 14px / 1 codicon; text-align: center; text-decoration: none; text-rendering: auto; text-transform: none; -webkit-font-smoothing: antialiased; user-select: none;&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;markdown-section-toolbar-item markdown-section-toolbar-copy light&quot; style=&quot;align-items: center; border-radius: 3px; color: var(--vscode-foreground); cursor: pointer; display: flex; height: 20px; justify-content: center; opacity: 0.3; position: relative; width: 20px; animation: auto ease 0s 1 normal none running none !important; pointer-events: auto;&quot;&gt;&lt;span class=&quot;codicon codicon-copy&quot; style=&quot;animation: auto ease 0s 1 normal none running none !important; display: inline-block; font: 14px / 1 codicon; text-align: center; text-decoration: none; text-rendering: auto; text-transform: none; -webkit-font-smoothing: antialiased; user-select: none;&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;li value=&quot;3&quot; style=&quot;list-style-type: decimal; padding-left: 0px; padding-top: 2px; padding-bottom: 2px; margin-top: 0px; margin-bottom: 0px;&quot;&gt;&lt;span&gt;启&lt;/span&gt;&lt;span&gt;动内嵌 Web&lt;/span&gt;&lt;span&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;服务器: 在&lt;/span&gt;&lt;span&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;refreshContext() 阶段启&lt;/span&gt;&lt;span&gt;动内嵌的 Web&lt;/span&gt;&lt;span&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;服务器（如 Tomcat&lt;/span&gt;&lt;span&gt;）。&lt;/span&gt;&lt;/li&gt;&lt;/section&gt;&lt;section id=&quot;markdown-section--10&quot; class=&quot;markdown-section&quot; data-markdown-raw=&quot;4. 自动配置: 通过 @EnableAutoConfiguration 自动配置各种组件，如 DispatcherServlet。&quot; data-section-index=&quot;10&quot; style=&quot;border-radius: 4px; margin: 6px 0px; padding: 4px; position: relative; scroll-margin-bottom: 40px; scroll-margin-top: 40px; color: rgb(20, 20, 20); font-family: &amp;quot;Segoe WPC&amp;quot;, &amp;quot;Segoe UI&amp;quot;, &amp;quot;Microsoft YaHei&amp;quot;, sans-serif; font-size: 13px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; background-color: rgb(235, 235, 235); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;&quot;&gt;&lt;div class=&quot;markdown-section-toolbar&quot; style=&quot;animation: auto ease 0s 1 normal none running none !important;&quot;&gt;&lt;div style=&quot;animation: auto ease 0s 1 normal none running none !important; height: 0px; width: 948px;&quot;&gt;&lt;div class=&quot;markdown-section-toolbar-internal&quot; style=&quot;border-radius: 4px; display: flex; gap: 4px; opacity: 0; position: absolute; right: 8px; top: 0px; transform: translateY(-55%); z-index: 303; animation: auto ease 0s 1 normal none running none !important;&quot;&gt;&lt;div class=&quot;markdown-section-toolbar-item light&quot; style=&quot;align-items: center; border-radius: 3px; color: var(--vscode-foreground); cursor: pointer; display: flex; height: 20px; justify-content: center; opacity: 0.3; position: relative; width: 20px; animation: auto ease 0s 1 normal none running none !important;&quot;&gt;&lt;span class=&quot;codicon codicon-reply&quot; style=&quot;animation: auto ease 0s 1 normal none running none !important; display: inline-block; font: 14px / 1 codicon; text-align: center; text-decoration: none; text-rendering: auto; text-transform: none; -webkit-font-smoothing: antialiased; user-select: none;&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;markdown-section-toolbar-item markdown-section-toolbar-copy light&quot; style=&quot;align-items: center; border-radius: 3px; color: var(--vscode-foreground); cursor: pointer; display: flex; height: 20px; justify-content: center; opacity: 0.3; position: relative; width: 20px; animation: auto ease 0s 1 normal none running none !important; pointer-events: auto;&quot;&gt;&lt;span class=&quot;codicon codicon-copy&quot; style=&quot;animation: auto ease 0s 1 normal none running none !important; display: inline-block; font: 14px / 1 codicon; text-align: center; text-decoration: none; text-rendering: auto; text-transform: none; -webkit-font-smoothing: antialiased; user-select: none;&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;li value=&quot;4&quot; style=&quot;list-style-type: decimal; padding-left: 0px; padding-top: 2px; padding-bottom: 2px; margin-top: 0px; margin-bottom: 0px;&quot;&gt;&lt;span&gt;自动配置:&lt;/span&gt;&lt;span&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;通过 @EnableAutoConfiguration 自&lt;/span&gt;&lt;span&gt;动配置各种组件，如&lt;/span&gt;&lt;span&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;DispatcherServlet&lt;/span&gt;&lt;span&gt;。&lt;/span&gt;&lt;/li&gt;&lt;/section&gt;&lt;section id=&quot;markdown-section--12&quot; class=&quot;markdown-section&quot; data-markdown-raw=&quot;5. 请求处理: 内嵌的 DispatcherServlet 负责处理 HTTP 请求。&quot; data-section-index=&quot;12&quot; style=&quot;border-radius: 4px; margin: 6px 0px; padding: 4px; position: relative; scroll-margin-bottom: 40px; scroll-margin-top: 40px; color: rgb(20, 20, 20); font-family: &amp;quot;Segoe WPC&amp;quot;, &amp;quot;Segoe UI&amp;quot;, &amp;quot;Microsoft YaHei&amp;quot;, sans-serif; font-size: 13px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; background-color: rgb(235, 235, 235); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;&quot;&gt;&lt;div class=&quot;markdown-section-toolbar&quot; style=&quot;animation: auto ease 0s 1 normal none running none !important;&quot;&gt;&lt;div style=&quot;animation: auto ease 0s 1 normal none running none !important; height: 0px; width: 948px;&quot;&gt;&lt;div class=&quot;markdown-section-toolbar-internal&quot; style=&quot;border-radius: 4px; display: flex; gap: 4px; opacity: 0; position: absolute; right: 8px; top: 0px; transform: translateY(-55%); z-index: 303; animation: auto ease 0s 1 normal none running none !important;&quot;&gt;&lt;div class=&quot;markdown-section-toolbar-item light&quot; style=&quot;align-items: center; border-radius: 3px; color: var(--vscode-foreground); cursor: pointer; display: flex; height: 20px; justify-content: center; opacity: 0.3; position: relative; width: 20px; animation: auto ease 0s 1 normal none running none !important;&quot;&gt;&lt;span class=&quot;codicon codicon-reply&quot; style=&quot;animation: auto ease 0s 1 normal none running none !important; display: inline-block; font: 14px / 1 codicon; text-align: center; text-decoration: none; text-rendering: auto; text-transform: none; -webkit-font-smoothing: antialiased; user-select: none;&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;markdown-section-toolbar-item markdown-section-toolbar-copy light&quot; style=&quot;align-items: center; border-radius: 3px; color: var(--vscode-foreground); cursor: pointer; display: flex; height: 20px; justify-content: center; opacity: 0.3; position: relative; width: 20px; animation: auto ease 0s 1 normal none running none !important; pointer-events: auto;&quot;&gt;&lt;span class=&quot;codicon codicon-copy&quot; style=&quot;animation: auto ease 0s 1 normal none running none !important; display: inline-block; font: 14px / 1 codicon; text-align: center; text-decoration: none; text-rendering: auto; text-transform: none; -webkit-font-smoothing: antialiased; user-select: none;&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;li value=&quot;5&quot; style=&quot;list-style-type: decimal; padding-left: 0px; padding-top: 2px; padding-bottom: 2px; margin-top: 0px; margin-bottom: 0px;&quot;&gt;&lt;span&gt;请求处理:&lt;/span&gt;&lt;span&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;内嵌的&lt;/span&gt;&lt;span&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;DispatcherServlet 负&lt;/span&gt;&lt;span&gt;责处理 HTTP 请求&lt;/span&gt;&lt;span&gt;。&lt;/span&gt;&lt;/li&gt;&lt;/section&gt;" link="&lt;section id=&quot;markdown-section--4&quot; class=&quot;markdown-section&quot; data-markdown-raw=&quot;1. SpringApplication.run(): 这是启动的入口，它会创建 Spring 应用上下文，并执行自动配置。&quot; data-section-index=&quot;4&quot; style=&quot;border-radius: 4px; margin: 6px 0px; padding: 4px; position: relative; scroll-margin-bottom: 40px; scroll-margin-top: 40px; color: rgb(20, 20, 20); font-family: &amp;quot;Segoe WPC&amp;quot;, &amp;quot;Segoe UI&amp;quot;, &amp;quot;Microsoft YaHei&amp;quot;, sans-serif; font-size: 13px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; background-color: rgb(235, 235, 235); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;&quot;&gt;&lt;li value=&quot;1&quot; style=&quot;list-style-type: decimal; padding-left: 0px; padding-top: 2px; padding-bottom: 2px; margin-top: 0px; margin-bottom: 0px;&quot;&gt;&lt;span&gt;SpringApplication.run()&lt;/span&gt;&lt;span&gt;: 这是启动的&lt;/span&gt;&lt;span&gt;入口，它会创建&lt;/span&gt;&lt;span&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;Spring 应用上下&lt;/span&gt;&lt;span&gt;文，并执行自动&lt;/span&gt;&lt;span&gt;配置。&lt;/span&gt;&lt;/li&gt;&lt;/section&gt;&lt;section id=&quot;markdown-section--6&quot; class=&quot;markdown-section&quot; data-markdown-raw=&quot;2. 创建应用上下文: 为 Web 应用创建 AnnotationConfigServletWebServerApplicationContext 上下文。&quot; data-section-index=&quot;6&quot; style=&quot;border-radius: 4px; margin: 6px 0px; padding: 4px; position: relative; scroll-margin-bottom: 40px; scroll-margin-top: 40px; color: rgb(20, 20, 20); font-family: &amp;quot;Segoe WPC&amp;quot;, &amp;quot;Segoe UI&amp;quot;, &amp;quot;Microsoft YaHei&amp;quot;, sans-serif; font-size: 13px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; background-color: rgb(235, 235, 235); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;&quot;&gt;&lt;div class=&quot;markdown-section-toolbar&quot; style=&quot;animation: auto ease 0s 1 normal none running none !important;&quot;&gt;&lt;div style=&quot;animation: auto ease 0s 1 normal none running none !important; height: 0px; width: 948px;&quot;&gt;&lt;div class=&quot;markdown-section-toolbar-internal&quot; style=&quot;border-radius: 4px; display: flex; gap: 4px; opacity: 0; position: absolute; right: 8px; top: 0px; transform: translateY(-55%); z-index: 303; animation: auto ease 0s 1 normal none running none !important;&quot;&gt;&lt;div class=&quot;markdown-section-toolbar-item light&quot; style=&quot;align-items: center; border-radius: 3px; color: var(--vscode-foreground); cursor: pointer; display: flex; height: 20px; justify-content: center; opacity: 0.3; position: relative; width: 20px; animation: auto ease 0s 1 normal none running none !important;&quot;&gt;&lt;span class=&quot;codicon codicon-reply&quot; style=&quot;animation: auto ease 0s 1 normal none running none !important; display: inline-block; font: 14px / 1 codicon; text-align: center; text-decoration: none; text-rendering: auto; text-transform: none; -webkit-font-smoothing: antialiased; user-select: none;&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;markdown-section-toolbar-item markdown-section-toolbar-copy light&quot; style=&quot;align-items: center; border-radius: 3px; color: var(--vscode-foreground); cursor: pointer; display: flex; height: 20px; justify-content: center; opacity: 0.3; position: relative; width: 20px; animation: auto ease 0s 1 normal none running none !important; pointer-events: auto;&quot;&gt;&lt;span class=&quot;codicon codicon-copy&quot; style=&quot;animation: auto ease 0s 1 normal none running none !important; display: inline-block; font: 14px / 1 codicon; text-align: center; text-decoration: none; text-rendering: auto; text-transform: none; -webkit-font-smoothing: antialiased; user-select: none;&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;li value=&quot;2&quot; style=&quot;list-style-type: decimal; padding-left: 0px; padding-top: 2px; padding-bottom: 2px; margin-top: 0px; margin-bottom: 0px;&quot;&gt;&lt;span&gt;创&lt;/span&gt;&lt;span&gt;建应用上下文&lt;/span&gt;&lt;span&gt;: 为 Web 应用创建&lt;/span&gt;&lt;span&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;AnnotationConfigServletWebServerApplicationContext&lt;/span&gt;&lt;span&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;上下文。&lt;/span&gt;&lt;/li&gt;&lt;/section&gt;&lt;section id=&quot;markdown-section--8&quot; class=&quot;markdown-section&quot; data-markdown-raw=&quot;3. 启动内嵌 Web 服务器: 在 refreshContext() 阶段启动内嵌的 Web 服务器（如 Tomcat）。&quot; data-section-index=&quot;8&quot; style=&quot;border-radius: 4px; margin: 6px 0px; padding: 4px; position: relative; scroll-margin-bottom: 40px; scroll-margin-top: 40px; color: rgb(20, 20, 20); font-family: &amp;quot;Segoe WPC&amp;quot;, &amp;quot;Segoe UI&amp;quot;, &amp;quot;Microsoft YaHei&amp;quot;, sans-serif; font-size: 13px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; background-color: rgb(235, 235, 235); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;&quot;&gt;&lt;div class=&quot;markdown-section-toolbar&quot; style=&quot;animation: auto ease 0s 1 normal none running none !important;&quot;&gt;&lt;div style=&quot;animation: auto ease 0s 1 normal none running none !important; height: 0px; width: 948px;&quot;&gt;&lt;div class=&quot;markdown-section-toolbar-internal&quot; style=&quot;border-radius: 4px; display: flex; gap: 4px; opacity: 0; position: absolute; right: 8px; top: 0px; transform: translateY(-55%); z-index: 303; animation: auto ease 0s 1 normal none running none !important;&quot;&gt;&lt;div class=&quot;markdown-section-toolbar-item light&quot; style=&quot;align-items: center; border-radius: 3px; color: var(--vscode-foreground); cursor: pointer; display: flex; height: 20px; justify-content: center; opacity: 0.3; position: relative; width: 20px; animation: auto ease 0s 1 normal none running none !important;&quot;&gt;&lt;span class=&quot;codicon codicon-reply&quot; style=&quot;animation: auto ease 0s 1 normal none running none !important; display: inline-block; font: 14px / 1 codicon; text-align: center; text-decoration: none; text-rendering: auto; text-transform: none; -webkit-font-smoothing: antialiased; user-select: none;&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;markdown-section-toolbar-item markdown-section-toolbar-copy light&quot; style=&quot;align-items: center; border-radius: 3px; color: var(--vscode-foreground); cursor: pointer; display: flex; height: 20px; justify-content: center; opacity: 0.3; position: relative; width: 20px; animation: auto ease 0s 1 normal none running none !important; pointer-events: auto;&quot;&gt;&lt;span class=&quot;codicon codicon-copy&quot; style=&quot;animation: auto ease 0s 1 normal none running none !important; display: inline-block; font: 14px / 1 codicon; text-align: center; text-decoration: none; text-rendering: auto; text-transform: none; -webkit-font-smoothing: antialiased; user-select: none;&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;li value=&quot;3&quot; style=&quot;list-style-type: decimal; padding-left: 0px; padding-top: 2px; padding-bottom: 2px; margin-top: 0px; margin-bottom: 0px;&quot;&gt;&lt;span&gt;启&lt;/span&gt;&lt;span&gt;动内嵌 Web&lt;/span&gt;&lt;span&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;服务器: 在&lt;/span&gt;&lt;span&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;refreshContext() 阶段启&lt;/span&gt;&lt;span&gt;动内嵌的 Web&lt;/span&gt;&lt;span&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;服务器（如 Tomcat&lt;/span&gt;&lt;span&gt;）。&lt;/span&gt;&lt;/li&gt;&lt;/section&gt;&lt;section id=&quot;markdown-section--10&quot; class=&quot;markdown-section&quot; data-markdown-raw=&quot;4. 自动配置: 通过 @EnableAutoConfiguration 自动配置各种组件，如 DispatcherServlet。&quot; data-section-index=&quot;10&quot; style=&quot;border-radius: 4px; margin: 6px 0px; padding: 4px; position: relative; scroll-margin-bottom: 40px; scroll-margin-top: 40px; color: rgb(20, 20, 20); font-family: &amp;quot;Segoe WPC&amp;quot;, &amp;quot;Segoe UI&amp;quot;, &amp;quot;Microsoft YaHei&amp;quot;, sans-serif; font-size: 13px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; background-color: rgb(235, 235, 235); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;&quot;&gt;&lt;div class=&quot;markdown-section-toolbar&quot; style=&quot;animation: auto ease 0s 1 normal none running none !important;&quot;&gt;&lt;div style=&quot;animation: auto ease 0s 1 normal none running none !important; height: 0px; width: 948px;&quot;&gt;&lt;div class=&quot;markdown-section-toolbar-internal&quot; style=&quot;border-radius: 4px; display: flex; gap: 4px; opacity: 0; position: absolute; right: 8px; top: 0px; transform: translateY(-55%); z-index: 303; animation: auto ease 0s 1 normal none running none !important;&quot;&gt;&lt;div class=&quot;markdown-section-toolbar-item light&quot; style=&quot;align-items: center; border-radius: 3px; color: var(--vscode-foreground); cursor: pointer; display: flex; height: 20px; justify-content: center; opacity: 0.3; position: relative; width: 20px; animation: auto ease 0s 1 normal none running none !important;&quot;&gt;&lt;span class=&quot;codicon codicon-reply&quot; style=&quot;animation: auto ease 0s 1 normal none running none !important; display: inline-block; font: 14px / 1 codicon; text-align: center; text-decoration: none; text-rendering: auto; text-transform: none; -webkit-font-smoothing: antialiased; user-select: none;&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;markdown-section-toolbar-item markdown-section-toolbar-copy light&quot; style=&quot;align-items: center; border-radius: 3px; color: var(--vscode-foreground); cursor: pointer; display: flex; height: 20px; justify-content: center; opacity: 0.3; position: relative; width: 20px; animation: auto ease 0s 1 normal none running none !important; pointer-events: auto;&quot;&gt;&lt;span class=&quot;codicon codicon-copy&quot; style=&quot;animation: auto ease 0s 1 normal none running none !important; display: inline-block; font: 14px / 1 codicon; text-align: center; text-decoration: none; text-rendering: auto; text-transform: none; -webkit-font-smoothing: antialiased; user-select: none;&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;li value=&quot;4&quot; style=&quot;list-style-type: decimal; padding-left: 0px; padding-top: 2px; padding-bottom: 2px; margin-top: 0px; margin-bottom: 0px;&quot;&gt;&lt;span&gt;自动配置:&lt;/span&gt;&lt;span&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;通过 @EnableAutoConfiguration 自&lt;/span&gt;&lt;span&gt;动配置各种组件，如&lt;/span&gt;&lt;span&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;DispatcherServlet&lt;/span&gt;&lt;span&gt;。&lt;/span&gt;&lt;/li&gt;&lt;/section&gt;&lt;section id=&quot;markdown-section--12&quot; class=&quot;markdown-section&quot; data-markdown-raw=&quot;5. 请求处理: 内嵌的 DispatcherServlet 负责处理 HTTP 请求。&quot; data-section-index=&quot;12&quot; style=&quot;border-radius: 4px; margin: 6px 0px; padding: 4px; position: relative; scroll-margin-bottom: 40px; scroll-margin-top: 40px; color: rgb(20, 20, 20); font-family: &amp;quot;Segoe WPC&amp;quot;, &amp;quot;Segoe UI&amp;quot;, &amp;quot;Microsoft YaHei&amp;quot;, sans-serif; font-size: 13px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; background-color: rgb(235, 235, 235); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;&quot;&gt;&lt;div class=&quot;markdown-section-toolbar&quot; style=&quot;animation: auto ease 0s 1 normal none running none !important;&quot;&gt;&lt;div style=&quot;animation: auto ease 0s 1 normal none running none !important; height: 0px; width: 948px;&quot;&gt;&lt;div class=&quot;markdown-section-toolbar-internal&quot; style=&quot;border-radius: 4px; display: flex; gap: 4px; opacity: 0; position: absolute; right: 8px; top: 0px; transform: translateY(-55%); z-index: 303; animation: auto ease 0s 1 normal none running none !important;&quot;&gt;&lt;div class=&quot;markdown-section-toolbar-item light&quot; style=&quot;align-items: center; border-radius: 3px; color: var(--vscode-foreground); cursor: pointer; display: flex; height: 20px; justify-content: center; opacity: 0.3; position: relative; width: 20px; animation: auto ease 0s 1 normal none running none !important;&quot;&gt;&lt;span class=&quot;codicon codicon-reply&quot; style=&quot;animation: auto ease 0s 1 normal none running none !important; display: inline-block; font: 14px / 1 codicon; text-align: center; text-decoration: none; text-rendering: auto; text-transform: none; -webkit-font-smoothing: antialiased; user-select: none;&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;markdown-section-toolbar-item markdown-section-toolbar-copy light&quot; style=&quot;align-items: center; border-radius: 3px; color: var(--vscode-foreground); cursor: pointer; display: flex; height: 20px; justify-content: center; opacity: 0.3; position: relative; width: 20px; animation: auto ease 0s 1 normal none running none !important; pointer-events: auto;&quot;&gt;&lt;span class=&quot;codicon codicon-copy&quot; style=&quot;animation: auto ease 0s 1 normal none running none !important; display: inline-block; font: 14px / 1 codicon; text-align: center; text-decoration: none; text-rendering: auto; text-transform: none; -webkit-font-smoothing: antialiased; user-select: none;&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;li value=&quot;5&quot; style=&quot;list-style-type: decimal; padding-left: 0px; padding-top: 2px; padding-bottom: 2px; margin-top: 0px; margin-bottom: 0px;&quot;&gt;&lt;span&gt;请求处理:&lt;/span&gt;&lt;span&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;内嵌的&lt;/span&gt;&lt;span&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;DispatcherServlet 负&lt;/span&gt;&lt;span&gt;责处理 HTTP 请求&lt;/span&gt;&lt;span&gt;。&lt;/span&gt;&lt;/li&gt;&lt;/section&gt;" id="aNLpZGCZ1lWiJH4HFngb-5">
          <mxCell style="text;whiteSpace=wrap;html=1;fontFamily=Helvetica;fontSize=18;fontColor=default;" vertex="1" parent="1">
            <mxGeometry x="-820" y="-1070" width="580" height="180" as="geometry" />
          </mxCell>
        </UserObject>
        <mxCell id="aNLpZGCZ1lWiJH4HFngb-6" value="源码分析SpringApplication#run" style="text;whiteSpace=wrap;fontFamily=Helvetica;fontSize=18;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
          <mxGeometry x="-820" y="-880" width="260" height="40" as="geometry" />
        </mxCell>
        <UserObject label="&lt;section id=&quot;markdown-section--4&quot; class=&quot;markdown-section&quot; data-markdown-raw=&quot;• getRunListeners(): 获取应用启动监听器，监听应用的启动状态（比如 ApplicationStartedEvent）。&quot; data-section-index=&quot;4&quot; style=&quot;border-radius: 4px; margin: 6px 0px; padding: 4px; position: relative; scroll-margin-bottom: 40px; scroll-margin-top: 40px; color: rgb(20, 20, 20); font-family: &amp;quot;Segoe WPC&amp;quot;, &amp;quot;Segoe UI&amp;quot;, &amp;quot;Microsoft YaHei&amp;quot;, sans-serif; font-size: 13px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; background-color: rgb(235, 235, 235); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;&quot;&gt;&lt;span style=&quot;margin-top: 0px;&quot;&gt;• getRunListeners(): 获取应用启&lt;/span&gt;&lt;span&gt;动监听器，监听应用的&lt;/span&gt;&lt;span&gt;启动状态（比如 ApplicationStart&lt;/span&gt;&lt;span style=&quot;margin-bottom: 0px;&quot;&gt;edEvent）。&lt;/span&gt;&lt;/section&gt;&lt;section id=&quot;markdown-section--6&quot; class=&quot;markdown-section&quot; data-markdown-raw=&quot;• prepareEnvironment(): 配置应用的环境（Environment），包括从配置文件（application.properties 或 application.yml）加载配置。&quot; data-section-index=&quot;6&quot; style=&quot;border-radius: 4px; margin: 6px 0px; padding: 4px; position: relative; scroll-margin-bottom: 40px; scroll-margin-top: 40px; color: rgb(20, 20, 20); font-family: &amp;quot;Segoe WPC&amp;quot;, &amp;quot;Segoe UI&amp;quot;, &amp;quot;Microsoft YaHei&amp;quot;, sans-serif; font-size: 13px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; background-color: rgb(235, 235, 235); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;&quot;&gt;&lt;div class=&quot;markdown-section-toolbar&quot; style=&quot;animation: auto ease 0s 1 normal none running none !important;&quot;&gt;&lt;div style=&quot;animation: auto ease 0s 1 normal none running none !important; height: 0px; width: 948px;&quot;&gt;&lt;div class=&quot;markdown-section-toolbar-internal&quot; style=&quot;border-radius: 4px; display: flex; gap: 4px; opacity: 0; position: absolute; right: 8px; top: 0px; transform: translateY(-55%); z-index: 303; animation: auto ease 0s 1 normal none running none !important;&quot;&gt;&lt;div class=&quot;markdown-section-toolbar-item light&quot; style=&quot;align-items: center; border-radius: 3px; color: var(--vscode-foreground); cursor: pointer; display: flex; height: 20px; justify-content: center; opacity: 0.3; position: relative; width: 20px; animation: auto ease 0s 1 normal none running none !important;&quot;&gt;&lt;span class=&quot;codicon codicon-reply&quot; style=&quot;animation: auto ease 0s 1 normal none running none !important; display: inline-block; font: 14px / 1 codicon; text-align: center; text-decoration: none; text-rendering: auto; text-transform: none; -webkit-font-smoothing: antialiased; user-select: none;&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;markdown-section-toolbar-item markdown-section-toolbar-copy light&quot; style=&quot;align-items: center; border-radius: 3px; color: var(--vscode-foreground); cursor: pointer; display: flex; height: 20px; justify-content: center; opacity: 0.3; position: relative; width: 20px; animation: auto ease 0s 1 normal none running none !important; pointer-events: auto;&quot;&gt;&lt;span class=&quot;codicon codicon-copy&quot; style=&quot;animation: auto ease 0s 1 normal none running none !important; display: inline-block; font: 14px / 1 codicon; text-align: center; text-decoration: none; text-rendering: auto; text-transform: none; -webkit-font-smoothing: antialiased; user-select: none;&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span style=&quot;margin-top: 0px;&quot;&gt;• prepareEnvironment(): 配&lt;/span&gt;&lt;span&gt;置应用的环境（Environment），包括从&lt;/span&gt;&lt;span&gt;配置文件（application.properties&lt;/span&gt;&lt;span&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;或 application.yml）加载配置&lt;/span&gt;&lt;span style=&quot;margin-bottom: 0px;&quot;&gt;。&lt;/span&gt;&lt;/section&gt;&lt;section id=&quot;markdown-section--8&quot; class=&quot;markdown-section&quot; data-markdown-raw=&quot;• createApplicationContext(): 创建 ApplicationContext，用于管理 Spring 的 Bean 及依赖注入。对于 Web 应用，通常会创建 AnnotationConfigServletWebServerApplicationContext 上下文。&quot; data-section-index=&quot;8&quot; style=&quot;border-radius: 4px; margin: 6px 0px; padding: 4px; position: relative; scroll-margin-bottom: 40px; scroll-margin-top: 40px; color: rgb(20, 20, 20); font-family: &amp;quot;Segoe WPC&amp;quot;, &amp;quot;Segoe UI&amp;quot;, &amp;quot;Microsoft YaHei&amp;quot;, sans-serif; font-size: 13px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; background-color: rgb(235, 235, 235); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;&quot;&gt;&lt;div class=&quot;markdown-section-toolbar&quot; style=&quot;animation: auto ease 0s 1 normal none running none !important;&quot;&gt;&lt;div style=&quot;animation: auto ease 0s 1 normal none running none !important; height: 0px; width: 948px;&quot;&gt;&lt;div class=&quot;markdown-section-toolbar-internal&quot; style=&quot;border-radius: 4px; display: flex; gap: 4px; opacity: 0; position: absolute; right: 8px; top: 0px; transform: translateY(-55%); z-index: 303; animation: auto ease 0s 1 normal none running none !important;&quot;&gt;&lt;div class=&quot;markdown-section-toolbar-item light&quot; style=&quot;align-items: center; border-radius: 3px; color: var(--vscode-foreground); cursor: pointer; display: flex; height: 20px; justify-content: center; opacity: 0.3; position: relative; width: 20px; animation: auto ease 0s 1 normal none running none !important;&quot;&gt;&lt;span class=&quot;codicon codicon-reply&quot; style=&quot;animation: auto ease 0s 1 normal none running none !important; display: inline-block; font: 14px / 1 codicon; text-align: center; text-decoration: none; text-rendering: auto; text-transform: none; -webkit-font-smoothing: antialiased; user-select: none;&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;markdown-section-toolbar-item markdown-section-toolbar-copy light&quot; style=&quot;align-items: center; border-radius: 3px; color: var(--vscode-foreground); cursor: pointer; display: flex; height: 20px; justify-content: center; opacity: 0.3; position: relative; width: 20px; animation: auto ease 0s 1 normal none running none !important; pointer-events: auto;&quot;&gt;&lt;span class=&quot;codicon codicon-copy&quot; style=&quot;animation: auto ease 0s 1 normal none running none !important; display: inline-block; font: 14px / 1 codicon; text-align: center; text-decoration: none; text-rendering: auto; text-transform: none; -webkit-font-smoothing: antialiased; user-select: none;&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span style=&quot;margin-top: 0px;&quot;&gt;• createApplicationContext(): 创建&lt;/span&gt;&lt;span&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;ApplicationContext，用于管理 Spring 的&lt;/span&gt;&lt;span&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;Bean 及依赖注入。对&lt;/span&gt;&lt;span&gt;于 Web 应用，通&lt;/span&gt;&lt;span&gt;常会创建 AnnotationConfigServletWeb&lt;/span&gt;&lt;span style=&quot;margin-bottom: 0px;&quot;&gt;ServerApplicationContext 上下文。&lt;/span&gt;&lt;/section&gt;&lt;section id=&quot;markdown-section--10&quot; class=&quot;markdown-section&quot; data-markdown-raw=&quot;• prepareContext(): 将环境和参数注入到上下文中，初始化上下文中的各种组件，如 BeanFactory、资源等。&quot; data-section-index=&quot;10&quot; style=&quot;border-radius: 4px; margin: 6px 0px; padding: 4px; position: relative; scroll-margin-bottom: 40px; scroll-margin-top: 40px; color: rgb(20, 20, 20); font-family: &amp;quot;Segoe WPC&amp;quot;, &amp;quot;Segoe UI&amp;quot;, &amp;quot;Microsoft YaHei&amp;quot;, sans-serif; font-size: 13px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; background-color: rgb(235, 235, 235); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;&quot;&gt;&lt;div class=&quot;markdown-section-toolbar&quot; style=&quot;animation: auto ease 0s 1 normal none running none !important;&quot;&gt;&lt;div style=&quot;animation: auto ease 0s 1 normal none running none !important; height: 0px; width: 948px;&quot;&gt;&lt;div class=&quot;markdown-section-toolbar-internal&quot; style=&quot;border-radius: 4px; display: flex; gap: 4px; opacity: 0; position: absolute; right: 8px; top: 0px; transform: translateY(-55%); z-index: 303; animation: auto ease 0s 1 normal none running none !important;&quot;&gt;&lt;div class=&quot;markdown-section-toolbar-item light&quot; style=&quot;align-items: center; border-radius: 3px; color: var(--vscode-foreground); cursor: pointer; display: flex; height: 20px; justify-content: center; opacity: 0.3; position: relative; width: 20px; animation: auto ease 0s 1 normal none running none !important;&quot;&gt;&lt;span class=&quot;codicon codicon-reply&quot; style=&quot;animation: auto ease 0s 1 normal none running none !important; display: inline-block; font: 14px / 1 codicon; text-align: center; text-decoration: none; text-rendering: auto; text-transform: none; -webkit-font-smoothing: antialiased; user-select: none;&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;markdown-section-toolbar-item markdown-section-toolbar-copy light&quot; style=&quot;align-items: center; border-radius: 3px; color: var(--vscode-foreground); cursor: pointer; display: flex; height: 20px; justify-content: center; opacity: 0.3; position: relative; width: 20px; animation: auto ease 0s 1 normal none running none !important; pointer-events: auto;&quot;&gt;&lt;span class=&quot;codicon codicon-copy&quot; style=&quot;animation: auto ease 0s 1 normal none running none !important; display: inline-block; font: 14px / 1 codicon; text-align: center; text-decoration: none; text-rendering: auto; text-transform: none; -webkit-font-smoothing: antialiased; user-select: none;&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span style=&quot;margin-top: 0px;&quot;&gt;• prepareContext(): 将环境和&lt;/span&gt;&lt;span&gt;参数注入到上下文中&lt;/span&gt;&lt;span&gt;，初始化上下文中的各种组件&lt;/span&gt;&lt;span&gt;，如 BeanFactory、资源等&lt;/span&gt;&lt;span style=&quot;margin-bottom: 0px;&quot;&gt;。&lt;/span&gt;&lt;/section&gt;&lt;section id=&quot;markdown-section--12&quot; class=&quot;markdown-section&quot; data-markdown-raw=&quot;• refreshContext(): 刷新应用上下文，启动所有已注册的 Bean，自动配置各类组件，加载 Spring MVC、事务管理等相关配置。&quot; data-section-index=&quot;12&quot; style=&quot;border-radius: 4px; margin: 6px 0px; padding: 4px; position: relative; scroll-margin-bottom: 40px; scroll-margin-top: 40px; color: rgb(20, 20, 20); font-family: &amp;quot;Segoe WPC&amp;quot;, &amp;quot;Segoe UI&amp;quot;, &amp;quot;Microsoft YaHei&amp;quot;, sans-serif; font-size: 13px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; background-color: rgb(235, 235, 235); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;&quot;&gt;&lt;div class=&quot;markdown-section-toolbar&quot; style=&quot;animation: auto ease 0s 1 normal none running none !important;&quot;&gt;&lt;div style=&quot;animation: auto ease 0s 1 normal none running none !important; height: 0px; width: 948px;&quot;&gt;&lt;div class=&quot;markdown-section-toolbar-internal&quot; style=&quot;border-radius: 4px; display: flex; gap: 4px; opacity: 0; position: absolute; right: 8px; top: 0px; transform: translateY(-55%); z-index: 303; animation: auto ease 0s 1 normal none running none !important;&quot;&gt;&lt;div class=&quot;markdown-section-toolbar-item light&quot; style=&quot;align-items: center; border-radius: 3px; color: var(--vscode-foreground); cursor: pointer; display: flex; height: 20px; justify-content: center; opacity: 0.3; position: relative; width: 20px; animation: auto ease 0s 1 normal none running none !important;&quot;&gt;&lt;span class=&quot;codicon codicon-reply&quot; style=&quot;animation: auto ease 0s 1 normal none running none !important; display: inline-block; font: 14px / 1 codicon; text-align: center; text-decoration: none; text-rendering: auto; text-transform: none; -webkit-font-smoothing: antialiased; user-select: none;&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;markdown-section-toolbar-item markdown-section-toolbar-copy light&quot; style=&quot;align-items: center; border-radius: 3px; color: var(--vscode-foreground); cursor: pointer; display: flex; height: 20px; justify-content: center; opacity: 0.3; position: relative; width: 20px; animation: auto ease 0s 1 normal none running none !important; pointer-events: auto;&quot;&gt;&lt;span class=&quot;codicon codicon-copy&quot; style=&quot;animation: auto ease 0s 1 normal none running none !important; display: inline-block; font: 14px / 1 codicon; text-align: center; text-decoration: none; text-rendering: auto; text-transform: none; -webkit-font-smoothing: antialiased; user-select: none;&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span style=&quot;margin-top: 0px;&quot;&gt;• refreshContext(): 刷新&lt;/span&gt;&lt;span&gt;应用上下文，启动所&lt;/span&gt;&lt;span&gt;有已注册的 Bean，自&lt;/span&gt;&lt;span&gt;动配置各类组件，加&lt;/span&gt;&lt;span&gt;载 Spring MVC、事务管理等相&lt;/span&gt;&lt;span style=&quot;margin-bottom: 0px;&quot;&gt;关配置。&lt;/span&gt;&lt;/section&gt;&lt;section id=&quot;markdown-section--14&quot; class=&quot;markdown-section&quot; data-markdown-raw=&quot;• afterRefresh(): 上下文刷新后，执行额外的初始化操作，比如启动内嵌的 Web 服务器。&quot; data-section-index=&quot;14&quot; style=&quot;border-radius: 4px; margin: 6px 0px; padding: 4px; position: relative; scroll-margin-bottom: 40px; scroll-margin-top: 40px; color: rgb(20, 20, 20); font-family: &amp;quot;Segoe WPC&amp;quot;, &amp;quot;Segoe UI&amp;quot;, &amp;quot;Microsoft YaHei&amp;quot;, sans-serif; font-size: 13px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; background-color: rgb(235, 235, 235); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;&quot;&gt;&lt;div class=&quot;markdown-section-toolbar&quot; style=&quot;animation: auto ease 0s 1 normal none running none !important;&quot;&gt;&lt;div style=&quot;animation: auto ease 0s 1 normal none running none !important; height: 0px; width: 948px;&quot;&gt;&lt;div class=&quot;markdown-section-toolbar-internal&quot; style=&quot;border-radius: 4px; display: flex; gap: 4px; opacity: 0; position: absolute; right: 8px; top: 0px; transform: translateY(-55%); z-index: 303; animation: auto ease 0s 1 normal none running none !important;&quot;&gt;&lt;div class=&quot;markdown-section-toolbar-item light&quot; style=&quot;align-items: center; border-radius: 3px; color: var(--vscode-foreground); cursor: pointer; display: flex; height: 20px; justify-content: center; opacity: 0.3; position: relative; width: 20px; animation: auto ease 0s 1 normal none running none !important;&quot;&gt;&lt;span class=&quot;codicon codicon-reply&quot; style=&quot;animation: auto ease 0s 1 normal none running none !important; display: inline-block; font: 14px / 1 codicon; text-align: center; text-decoration: none; text-rendering: auto; text-transform: none; -webkit-font-smoothing: antialiased; user-select: none;&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;markdown-section-toolbar-item markdown-section-toolbar-copy light&quot; style=&quot;align-items: center; border-radius: 3px; color: var(--vscode-foreground); cursor: pointer; display: flex; height: 20px; justify-content: center; opacity: 0.3; position: relative; width: 20px; animation: auto ease 0s 1 normal none running none !important; pointer-events: auto;&quot;&gt;&lt;span class=&quot;codicon codicon-copy&quot; style=&quot;animation: auto ease 0s 1 normal none running none !important; display: inline-block; font: 14px / 1 codicon; text-align: center; text-decoration: none; text-rendering: auto; text-transform: none; -webkit-font-smoothing: antialiased; user-select: none;&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span style=&quot;margin-top: 0px;&quot;&gt;• afterRefresh(): 上&lt;/span&gt;&lt;span&gt;下文刷新后，执行额&lt;/span&gt;&lt;span&gt;外的初始化操作，比&lt;/span&gt;&lt;span&gt;如启动内嵌的 Web 服&lt;/span&gt;&lt;span style=&quot;margin-bottom: 0px;&quot;&gt;务器。&lt;/span&gt;&lt;/section&gt;&lt;section id=&quot;markdown-section--16&quot; class=&quot;markdown-section&quot; data-markdown-raw=&quot;• callRunners(): 调用 ApplicationRunner 和 CommandLineRunner 接口的实现类，以执行启动后的自定义逻辑。&quot; data-section-index=&quot;16&quot; style=&quot;border-radius: 4px; margin: 6px 0px; padding: 4px; position: relative; scroll-margin-bottom: 40px; scroll-margin-top: 40px; color: rgb(20, 20, 20); font-family: &amp;quot;Segoe WPC&amp;quot;, &amp;quot;Segoe UI&amp;quot;, &amp;quot;Microsoft YaHei&amp;quot;, sans-serif; font-size: 13px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; background-color: rgb(235, 235, 235); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;&quot;&gt;&lt;div class=&quot;markdown-section-toolbar&quot; style=&quot;animation: auto ease 0s 1 normal none running none !important;&quot;&gt;&lt;div style=&quot;animation: auto ease 0s 1 normal none running none !important; height: 0px; width: 948px;&quot;&gt;&lt;div class=&quot;markdown-section-toolbar-internal&quot; style=&quot;border-radius: 4px; display: flex; gap: 4px; opacity: 0; position: absolute; right: 8px; top: 0px; transform: translateY(-55%); z-index: 303; animation: auto ease 0s 1 normal none running none !important;&quot;&gt;&lt;div class=&quot;markdown-section-toolbar-item light&quot; style=&quot;align-items: center; border-radius: 3px; color: var(--vscode-foreground); cursor: pointer; display: flex; height: 20px; justify-content: center; opacity: 0.3; position: relative; width: 20px; animation: auto ease 0s 1 normal none running none !important;&quot;&gt;&lt;span class=&quot;codicon codicon-reply&quot; style=&quot;animation: auto ease 0s 1 normal none running none !important; display: inline-block; font: 14px / 1 codicon; text-align: center; text-decoration: none; text-rendering: auto; text-transform: none; -webkit-font-smoothing: antialiased; user-select: none;&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;markdown-section-toolbar-item markdown-section-toolbar-copy light&quot; style=&quot;align-items: center; border-radius: 3px; color: var(--vscode-foreground); cursor: pointer; display: flex; height: 20px; justify-content: center; opacity: 0.3; position: relative; width: 20px; animation: auto ease 0s 1 normal none running none !important; pointer-events: auto;&quot;&gt;&lt;span class=&quot;codicon codicon-copy&quot; style=&quot;animation: auto ease 0s 1 normal none running none !important; display: inline-block; font: 14px / 1 codicon; text-align: center; text-decoration: none; text-rendering: auto; text-transform: none; -webkit-font-smoothing: antialiased; user-select: none;&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span style=&quot;margin-top: 0px;&quot;&gt;• callRunners(): 调&lt;/span&gt;&lt;span&gt;用 ApplicationRunner 和 CommandLineRunner&lt;/span&gt;&lt;span&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;接口的实现类，以执&lt;/span&gt;&lt;span&gt;行启动后的自定义&lt;/span&gt;&lt;span style=&quot;margin-bottom: 0px;&quot;&gt;逻辑。&lt;/span&gt;&lt;/section&gt;" link="&lt;section id=&quot;markdown-section--4&quot; class=&quot;markdown-section&quot; data-markdown-raw=&quot;• getRunListeners(): 获取应用启动监听器，监听应用的启动状态（比如 ApplicationStartedEvent）。&quot; data-section-index=&quot;4&quot; style=&quot;border-radius: 4px; margin: 6px 0px; padding: 4px; position: relative; scroll-margin-bottom: 40px; scroll-margin-top: 40px; color: rgb(20, 20, 20); font-family: &amp;quot;Segoe WPC&amp;quot;, &amp;quot;Segoe UI&amp;quot;, &amp;quot;Microsoft YaHei&amp;quot;, sans-serif; font-size: 13px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; background-color: rgb(235, 235, 235); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;&quot;&gt;&lt;span style=&quot;margin-top: 0px;&quot;&gt;• getRunListeners(): 获取应用启&lt;/span&gt;&lt;span&gt;动监听器，监听应用的&lt;/span&gt;&lt;span&gt;启动状态（比如 ApplicationStart&lt;/span&gt;&lt;span style=&quot;margin-bottom: 0px;&quot;&gt;edEvent）。&lt;/span&gt;&lt;/section&gt;&lt;section id=&quot;markdown-section--6&quot; class=&quot;markdown-section&quot; data-markdown-raw=&quot;• prepareEnvironment(): 配置应用的环境（Environment），包括从配置文件（application.properties 或 application.yml）加载配置。&quot; data-section-index=&quot;6&quot; style=&quot;border-radius: 4px; margin: 6px 0px; padding: 4px; position: relative; scroll-margin-bottom: 40px; scroll-margin-top: 40px; color: rgb(20, 20, 20); font-family: &amp;quot;Segoe WPC&amp;quot;, &amp;quot;Segoe UI&amp;quot;, &amp;quot;Microsoft YaHei&amp;quot;, sans-serif; font-size: 13px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; background-color: rgb(235, 235, 235); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;&quot;&gt;&lt;div class=&quot;markdown-section-toolbar&quot; style=&quot;animation: auto ease 0s 1 normal none running none !important;&quot;&gt;&lt;div style=&quot;animation: auto ease 0s 1 normal none running none !important; height: 0px; width: 948px;&quot;&gt;&lt;div class=&quot;markdown-section-toolbar-internal&quot; style=&quot;border-radius: 4px; display: flex; gap: 4px; opacity: 0; position: absolute; right: 8px; top: 0px; transform: translateY(-55%); z-index: 303; animation: auto ease 0s 1 normal none running none !important;&quot;&gt;&lt;div class=&quot;markdown-section-toolbar-item light&quot; style=&quot;align-items: center; border-radius: 3px; color: var(--vscode-foreground); cursor: pointer; display: flex; height: 20px; justify-content: center; opacity: 0.3; position: relative; width: 20px; animation: auto ease 0s 1 normal none running none !important;&quot;&gt;&lt;span class=&quot;codicon codicon-reply&quot; style=&quot;animation: auto ease 0s 1 normal none running none !important; display: inline-block; font: 14px / 1 codicon; text-align: center; text-decoration: none; text-rendering: auto; text-transform: none; -webkit-font-smoothing: antialiased; user-select: none;&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;markdown-section-toolbar-item markdown-section-toolbar-copy light&quot; style=&quot;align-items: center; border-radius: 3px; color: var(--vscode-foreground); cursor: pointer; display: flex; height: 20px; justify-content: center; opacity: 0.3; position: relative; width: 20px; animation: auto ease 0s 1 normal none running none !important; pointer-events: auto;&quot;&gt;&lt;span class=&quot;codicon codicon-copy&quot; style=&quot;animation: auto ease 0s 1 normal none running none !important; display: inline-block; font: 14px / 1 codicon; text-align: center; text-decoration: none; text-rendering: auto; text-transform: none; -webkit-font-smoothing: antialiased; user-select: none;&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span style=&quot;margin-top: 0px;&quot;&gt;• prepareEnvironment(): 配&lt;/span&gt;&lt;span&gt;置应用的环境（Environment），包括从&lt;/span&gt;&lt;span&gt;配置文件（application.properties&lt;/span&gt;&lt;span&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;或 application.yml）加载配置&lt;/span&gt;&lt;span style=&quot;margin-bottom: 0px;&quot;&gt;。&lt;/span&gt;&lt;/section&gt;&lt;section id=&quot;markdown-section--8&quot; class=&quot;markdown-section&quot; data-markdown-raw=&quot;• createApplicationContext(): 创建 ApplicationContext，用于管理 Spring 的 Bean 及依赖注入。对于 Web 应用，通常会创建 AnnotationConfigServletWebServerApplicationContext 上下文。&quot; data-section-index=&quot;8&quot; style=&quot;border-radius: 4px; margin: 6px 0px; padding: 4px; position: relative; scroll-margin-bottom: 40px; scroll-margin-top: 40px; color: rgb(20, 20, 20); font-family: &amp;quot;Segoe WPC&amp;quot;, &amp;quot;Segoe UI&amp;quot;, &amp;quot;Microsoft YaHei&amp;quot;, sans-serif; font-size: 13px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; background-color: rgb(235, 235, 235); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;&quot;&gt;&lt;div class=&quot;markdown-section-toolbar&quot; style=&quot;animation: auto ease 0s 1 normal none running none !important;&quot;&gt;&lt;div style=&quot;animation: auto ease 0s 1 normal none running none !important; height: 0px; width: 948px;&quot;&gt;&lt;div class=&quot;markdown-section-toolbar-internal&quot; style=&quot;border-radius: 4px; display: flex; gap: 4px; opacity: 0; position: absolute; right: 8px; top: 0px; transform: translateY(-55%); z-index: 303; animation: auto ease 0s 1 normal none running none !important;&quot;&gt;&lt;div class=&quot;markdown-section-toolbar-item light&quot; style=&quot;align-items: center; border-radius: 3px; color: var(--vscode-foreground); cursor: pointer; display: flex; height: 20px; justify-content: center; opacity: 0.3; position: relative; width: 20px; animation: auto ease 0s 1 normal none running none !important;&quot;&gt;&lt;span class=&quot;codicon codicon-reply&quot; style=&quot;animation: auto ease 0s 1 normal none running none !important; display: inline-block; font: 14px / 1 codicon; text-align: center; text-decoration: none; text-rendering: auto; text-transform: none; -webkit-font-smoothing: antialiased; user-select: none;&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;markdown-section-toolbar-item markdown-section-toolbar-copy light&quot; style=&quot;align-items: center; border-radius: 3px; color: var(--vscode-foreground); cursor: pointer; display: flex; height: 20px; justify-content: center; opacity: 0.3; position: relative; width: 20px; animation: auto ease 0s 1 normal none running none !important; pointer-events: auto;&quot;&gt;&lt;span class=&quot;codicon codicon-copy&quot; style=&quot;animation: auto ease 0s 1 normal none running none !important; display: inline-block; font: 14px / 1 codicon; text-align: center; text-decoration: none; text-rendering: auto; text-transform: none; -webkit-font-smoothing: antialiased; user-select: none;&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span style=&quot;margin-top: 0px;&quot;&gt;• createApplicationContext(): 创建&lt;/span&gt;&lt;span&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;ApplicationContext，用于管理 Spring 的&lt;/span&gt;&lt;span&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;Bean 及依赖注入。对&lt;/span&gt;&lt;span&gt;于 Web 应用，通&lt;/span&gt;&lt;span&gt;常会创建 AnnotationConfigServletWeb&lt;/span&gt;&lt;span style=&quot;margin-bottom: 0px;&quot;&gt;ServerApplicationContext 上下文。&lt;/span&gt;&lt;/section&gt;&lt;section id=&quot;markdown-section--10&quot; class=&quot;markdown-section&quot; data-markdown-raw=&quot;• prepareContext(): 将环境和参数注入到上下文中，初始化上下文中的各种组件，如 BeanFactory、资源等。&quot; data-section-index=&quot;10&quot; style=&quot;border-radius: 4px; margin: 6px 0px; padding: 4px; position: relative; scroll-margin-bottom: 40px; scroll-margin-top: 40px; color: rgb(20, 20, 20); font-family: &amp;quot;Segoe WPC&amp;quot;, &amp;quot;Segoe UI&amp;quot;, &amp;quot;Microsoft YaHei&amp;quot;, sans-serif; font-size: 13px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; background-color: rgb(235, 235, 235); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;&quot;&gt;&lt;div class=&quot;markdown-section-toolbar&quot; style=&quot;animation: auto ease 0s 1 normal none running none !important;&quot;&gt;&lt;div style=&quot;animation: auto ease 0s 1 normal none running none !important; height: 0px; width: 948px;&quot;&gt;&lt;div class=&quot;markdown-section-toolbar-internal&quot; style=&quot;border-radius: 4px; display: flex; gap: 4px; opacity: 0; position: absolute; right: 8px; top: 0px; transform: translateY(-55%); z-index: 303; animation: auto ease 0s 1 normal none running none !important;&quot;&gt;&lt;div class=&quot;markdown-section-toolbar-item light&quot; style=&quot;align-items: center; border-radius: 3px; color: var(--vscode-foreground); cursor: pointer; display: flex; height: 20px; justify-content: center; opacity: 0.3; position: relative; width: 20px; animation: auto ease 0s 1 normal none running none !important;&quot;&gt;&lt;span class=&quot;codicon codicon-reply&quot; style=&quot;animation: auto ease 0s 1 normal none running none !important; display: inline-block; font: 14px / 1 codicon; text-align: center; text-decoration: none; text-rendering: auto; text-transform: none; -webkit-font-smoothing: antialiased; user-select: none;&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;markdown-section-toolbar-item markdown-section-toolbar-copy light&quot; style=&quot;align-items: center; border-radius: 3px; color: var(--vscode-foreground); cursor: pointer; display: flex; height: 20px; justify-content: center; opacity: 0.3; position: relative; width: 20px; animation: auto ease 0s 1 normal none running none !important; pointer-events: auto;&quot;&gt;&lt;span class=&quot;codicon codicon-copy&quot; style=&quot;animation: auto ease 0s 1 normal none running none !important; display: inline-block; font: 14px / 1 codicon; text-align: center; text-decoration: none; text-rendering: auto; text-transform: none; -webkit-font-smoothing: antialiased; user-select: none;&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span style=&quot;margin-top: 0px;&quot;&gt;• prepareContext(): 将环境和&lt;/span&gt;&lt;span&gt;参数注入到上下文中&lt;/span&gt;&lt;span&gt;，初始化上下文中的各种组件&lt;/span&gt;&lt;span&gt;，如 BeanFactory、资源等&lt;/span&gt;&lt;span style=&quot;margin-bottom: 0px;&quot;&gt;。&lt;/span&gt;&lt;/section&gt;&lt;section id=&quot;markdown-section--12&quot; class=&quot;markdown-section&quot; data-markdown-raw=&quot;• refreshContext(): 刷新应用上下文，启动所有已注册的 Bean，自动配置各类组件，加载 Spring MVC、事务管理等相关配置。&quot; data-section-index=&quot;12&quot; style=&quot;border-radius: 4px; margin: 6px 0px; padding: 4px; position: relative; scroll-margin-bottom: 40px; scroll-margin-top: 40px; color: rgb(20, 20, 20); font-family: &amp;quot;Segoe WPC&amp;quot;, &amp;quot;Segoe UI&amp;quot;, &amp;quot;Microsoft YaHei&amp;quot;, sans-serif; font-size: 13px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; background-color: rgb(235, 235, 235); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;&quot;&gt;&lt;div class=&quot;markdown-section-toolbar&quot; style=&quot;animation: auto ease 0s 1 normal none running none !important;&quot;&gt;&lt;div style=&quot;animation: auto ease 0s 1 normal none running none !important; height: 0px; width: 948px;&quot;&gt;&lt;div class=&quot;markdown-section-toolbar-internal&quot; style=&quot;border-radius: 4px; display: flex; gap: 4px; opacity: 0; position: absolute; right: 8px; top: 0px; transform: translateY(-55%); z-index: 303; animation: auto ease 0s 1 normal none running none !important;&quot;&gt;&lt;div class=&quot;markdown-section-toolbar-item light&quot; style=&quot;align-items: center; border-radius: 3px; color: var(--vscode-foreground); cursor: pointer; display: flex; height: 20px; justify-content: center; opacity: 0.3; position: relative; width: 20px; animation: auto ease 0s 1 normal none running none !important;&quot;&gt;&lt;span class=&quot;codicon codicon-reply&quot; style=&quot;animation: auto ease 0s 1 normal none running none !important; display: inline-block; font: 14px / 1 codicon; text-align: center; text-decoration: none; text-rendering: auto; text-transform: none; -webkit-font-smoothing: antialiased; user-select: none;&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;markdown-section-toolbar-item markdown-section-toolbar-copy light&quot; style=&quot;align-items: center; border-radius: 3px; color: var(--vscode-foreground); cursor: pointer; display: flex; height: 20px; justify-content: center; opacity: 0.3; position: relative; width: 20px; animation: auto ease 0s 1 normal none running none !important; pointer-events: auto;&quot;&gt;&lt;span class=&quot;codicon codicon-copy&quot; style=&quot;animation: auto ease 0s 1 normal none running none !important; display: inline-block; font: 14px / 1 codicon; text-align: center; text-decoration: none; text-rendering: auto; text-transform: none; -webkit-font-smoothing: antialiased; user-select: none;&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span style=&quot;margin-top: 0px;&quot;&gt;• refreshContext(): 刷新&lt;/span&gt;&lt;span&gt;应用上下文，启动所&lt;/span&gt;&lt;span&gt;有已注册的 Bean，自&lt;/span&gt;&lt;span&gt;动配置各类组件，加&lt;/span&gt;&lt;span&gt;载 Spring MVC、事务管理等相&lt;/span&gt;&lt;span style=&quot;margin-bottom: 0px;&quot;&gt;关配置。&lt;/span&gt;&lt;/section&gt;&lt;section id=&quot;markdown-section--14&quot; class=&quot;markdown-section&quot; data-markdown-raw=&quot;• afterRefresh(): 上下文刷新后，执行额外的初始化操作，比如启动内嵌的 Web 服务器。&quot; data-section-index=&quot;14&quot; style=&quot;border-radius: 4px; margin: 6px 0px; padding: 4px; position: relative; scroll-margin-bottom: 40px; scroll-margin-top: 40px; color: rgb(20, 20, 20); font-family: &amp;quot;Segoe WPC&amp;quot;, &amp;quot;Segoe UI&amp;quot;, &amp;quot;Microsoft YaHei&amp;quot;, sans-serif; font-size: 13px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; background-color: rgb(235, 235, 235); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;&quot;&gt;&lt;div class=&quot;markdown-section-toolbar&quot; style=&quot;animation: auto ease 0s 1 normal none running none !important;&quot;&gt;&lt;div style=&quot;animation: auto ease 0s 1 normal none running none !important; height: 0px; width: 948px;&quot;&gt;&lt;div class=&quot;markdown-section-toolbar-internal&quot; style=&quot;border-radius: 4px; display: flex; gap: 4px; opacity: 0; position: absolute; right: 8px; top: 0px; transform: translateY(-55%); z-index: 303; animation: auto ease 0s 1 normal none running none !important;&quot;&gt;&lt;div class=&quot;markdown-section-toolbar-item light&quot; style=&quot;align-items: center; border-radius: 3px; color: var(--vscode-foreground); cursor: pointer; display: flex; height: 20px; justify-content: center; opacity: 0.3; position: relative; width: 20px; animation: auto ease 0s 1 normal none running none !important;&quot;&gt;&lt;span class=&quot;codicon codicon-reply&quot; style=&quot;animation: auto ease 0s 1 normal none running none !important; display: inline-block; font: 14px / 1 codicon; text-align: center; text-decoration: none; text-rendering: auto; text-transform: none; -webkit-font-smoothing: antialiased; user-select: none;&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;markdown-section-toolbar-item markdown-section-toolbar-copy light&quot; style=&quot;align-items: center; border-radius: 3px; color: var(--vscode-foreground); cursor: pointer; display: flex; height: 20px; justify-content: center; opacity: 0.3; position: relative; width: 20px; animation: auto ease 0s 1 normal none running none !important; pointer-events: auto;&quot;&gt;&lt;span class=&quot;codicon codicon-copy&quot; style=&quot;animation: auto ease 0s 1 normal none running none !important; display: inline-block; font: 14px / 1 codicon; text-align: center; text-decoration: none; text-rendering: auto; text-transform: none; -webkit-font-smoothing: antialiased; user-select: none;&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span style=&quot;margin-top: 0px;&quot;&gt;• afterRefresh(): 上&lt;/span&gt;&lt;span&gt;下文刷新后，执行额&lt;/span&gt;&lt;span&gt;外的初始化操作，比&lt;/span&gt;&lt;span&gt;如启动内嵌的 Web 服&lt;/span&gt;&lt;span style=&quot;margin-bottom: 0px;&quot;&gt;务器。&lt;/span&gt;&lt;/section&gt;&lt;section id=&quot;markdown-section--16&quot; class=&quot;markdown-section&quot; data-markdown-raw=&quot;• callRunners(): 调用 ApplicationRunner 和 CommandLineRunner 接口的实现类，以执行启动后的自定义逻辑。&quot; data-section-index=&quot;16&quot; style=&quot;border-radius: 4px; margin: 6px 0px; padding: 4px; position: relative; scroll-margin-bottom: 40px; scroll-margin-top: 40px; color: rgb(20, 20, 20); font-family: &amp;quot;Segoe WPC&amp;quot;, &amp;quot;Segoe UI&amp;quot;, &amp;quot;Microsoft YaHei&amp;quot;, sans-serif; font-size: 13px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; background-color: rgb(235, 235, 235); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;&quot;&gt;&lt;div class=&quot;markdown-section-toolbar&quot; style=&quot;animation: auto ease 0s 1 normal none running none !important;&quot;&gt;&lt;div style=&quot;animation: auto ease 0s 1 normal none running none !important; height: 0px; width: 948px;&quot;&gt;&lt;div class=&quot;markdown-section-toolbar-internal&quot; style=&quot;border-radius: 4px; display: flex; gap: 4px; opacity: 0; position: absolute; right: 8px; top: 0px; transform: translateY(-55%); z-index: 303; animation: auto ease 0s 1 normal none running none !important;&quot;&gt;&lt;div class=&quot;markdown-section-toolbar-item light&quot; style=&quot;align-items: center; border-radius: 3px; color: var(--vscode-foreground); cursor: pointer; display: flex; height: 20px; justify-content: center; opacity: 0.3; position: relative; width: 20px; animation: auto ease 0s 1 normal none running none !important;&quot;&gt;&lt;span class=&quot;codicon codicon-reply&quot; style=&quot;animation: auto ease 0s 1 normal none running none !important; display: inline-block; font: 14px / 1 codicon; text-align: center; text-decoration: none; text-rendering: auto; text-transform: none; -webkit-font-smoothing: antialiased; user-select: none;&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;markdown-section-toolbar-item markdown-section-toolbar-copy light&quot; style=&quot;align-items: center; border-radius: 3px; color: var(--vscode-foreground); cursor: pointer; display: flex; height: 20px; justify-content: center; opacity: 0.3; position: relative; width: 20px; animation: auto ease 0s 1 normal none running none !important; pointer-events: auto;&quot;&gt;&lt;span class=&quot;codicon codicon-copy&quot; style=&quot;animation: auto ease 0s 1 normal none running none !important; display: inline-block; font: 14px / 1 codicon; text-align: center; text-decoration: none; text-rendering: auto; text-transform: none; -webkit-font-smoothing: antialiased; user-select: none;&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span style=&quot;margin-top: 0px;&quot;&gt;• callRunners(): 调&lt;/span&gt;&lt;span&gt;用 ApplicationRunner 和 CommandLineRunner&lt;/span&gt;&lt;span&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;接口的实现类，以执&lt;/span&gt;&lt;span&gt;行启动后的自定义&lt;/span&gt;&lt;span style=&quot;margin-bottom: 0px;&quot;&gt;逻辑。&lt;/span&gt;&lt;/section&gt;" id="aNLpZGCZ1lWiJH4HFngb-7">
          <mxCell style="text;whiteSpace=wrap;html=1;fontFamily=Helvetica;fontSize=18;fontColor=default;" vertex="1" parent="1">
            <mxGeometry x="-820" y="-840" width="560" height="240" as="geometry" />
          </mxCell>
        </UserObject>
        <mxCell id="aNLpZGCZ1lWiJH4HFngb-8" value="refreshContext" style="text;whiteSpace=wrap;fontFamily=Helvetica;fontSize=18;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
          <mxGeometry x="-820" y="-600" width="150" height="40" as="geometry" />
        </mxCell>
        <mxCell id="aNLpZGCZ1lWiJH4HFngb-9" value="&lt;section id=&quot;markdown-section--4&quot; class=&quot;markdown-section&quot; data-markdown-raw=&quot;在 run() 方法中，refreshContext() 会调用 Spring 的 AbstractApplicationContext 的 refresh() 方法，该方法是 Spring 应用启动的核心。&quot; data-section-index=&quot;4&quot; style=&quot;border-radius: 4px; margin: 6px 0px; padding: 4px; position: relative; scroll-margin-bottom: 40px; scroll-margin-top: 40px; color: rgb(20, 20, 20); font-family: &amp;quot;Segoe WPC&amp;quot;, &amp;quot;Segoe UI&amp;quot;, &amp;quot;Microsoft YaHei&amp;quot;, sans-serif; font-size: 13px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; background-color: rgb(235, 235, 235); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;&quot;&gt;&lt;span style=&quot;margin-top: 0px;&quot;&gt;在 run() 方法中，refreshContext() 会调用 Spring 的 AbstractApplicationContext 的 refresh() 方法&lt;/span&gt;&lt;span&gt;，该方法是 Spring 应用&lt;/span&gt;&lt;span style=&quot;margin-bottom: 0px;&quot;&gt;启动的核心。&lt;/span&gt;&lt;/section&gt;&lt;section id=&quot;markdown-section--6&quot; class=&quot;markdown-section&quot; data-markdown-raw=&quot;对于 Web 应用，它还会启动内嵌的 Web 服务器。&quot; data-section-index=&quot;6&quot; style=&quot;border-radius: 4px; margin: 6px 0px; padding: 4px; position: relative; scroll-margin-bottom: 40px; scroll-margin-top: 40px; color: rgb(20, 20, 20); font-family: &amp;quot;Segoe WPC&amp;quot;, &amp;quot;Segoe UI&amp;quot;, &amp;quot;Microsoft YaHei&amp;quot;, sans-serif; font-size: 13px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; background-color: rgb(235, 235, 235); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;&quot;&gt;&lt;div class=&quot;markdown-section-toolbar&quot; style=&quot;animation: auto ease 0s 1 normal none running none !important;&quot;&gt;&lt;div style=&quot;animation: auto ease 0s 1 normal none running none !important; height: 0px; width: 747px;&quot;&gt;&lt;div class=&quot;markdown-section-toolbar-internal&quot; style=&quot;border-radius: 4px; display: flex; gap: 4px; opacity: 0; position: absolute; right: 8px; top: 0px; transform: translateY(-55%); z-index: 303; animation: auto ease 0s 1 normal none running none !important;&quot;&gt;&lt;div class=&quot;markdown-section-toolbar-item light&quot; style=&quot;align-items: center; border-radius: 3px; color: var(--vscode-foreground); cursor: pointer; display: flex; height: 20px; justify-content: center; opacity: 0.3; position: relative; width: 20px; animation: auto ease 0s 1 normal none running none !important;&quot;&gt;&lt;span class=&quot;codicon codicon-reply&quot; style=&quot;animation: auto ease 0s 1 normal none running none !important; display: inline-block; font: 14px / 1 codicon; text-align: center; text-decoration: none; text-rendering: auto; text-transform: none; -webkit-font-smoothing: antialiased; user-select: none;&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;markdown-section-toolbar-item markdown-section-toolbar-copy light&quot; style=&quot;align-items: center; border-radius: 3px; color: var(--vscode-foreground); cursor: pointer; display: flex; height: 20px; justify-content: center; opacity: 0.3; position: relative; width: 20px; animation: auto ease 0s 1 normal none running none !important; pointer-events: auto;&quot;&gt;&lt;span class=&quot;codicon codicon-copy&quot; style=&quot;animation: auto ease 0s 1 normal none running none !important; display: inline-block; font: 14px / 1 codicon; text-align: center; text-decoration: none; text-rendering: auto; text-transform: none; -webkit-font-smoothing: antialiased; user-select: none;&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span style=&quot;margin-top: 0px;&quot;&gt;对于 Web&lt;/span&gt;&lt;span&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;应用，它还会启动内嵌&lt;/span&gt;&lt;span style=&quot;margin-bottom: 0px;&quot;&gt;的 Web 服务器。&lt;/span&gt;&lt;/section&gt;&lt;section id=&quot;markdown-section--8&quot; class=&quot;markdown-section&quot; data-markdown-raw=&quot;最终会调用到 ServletWebServerApplicationContext#onRefresh 方法，这个方法内会调用 createWebServer 来创建并启动内嵌的 Web 服务器（如 Tomcat、Jetty 或 Undertow）。&quot; data-section-index=&quot;8&quot; style=&quot;border-radius: 4px; margin: 6px 0px; padding: 4px; position: relative; scroll-margin-bottom: 40px; scroll-margin-top: 40px; color: rgb(20, 20, 20); font-family: &amp;quot;Segoe WPC&amp;quot;, &amp;quot;Segoe UI&amp;quot;, &amp;quot;Microsoft YaHei&amp;quot;, sans-serif; font-size: 13px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; background-color: rgb(235, 235, 235); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;&quot;&gt;&lt;div class=&quot;markdown-section-toolbar&quot; style=&quot;animation: auto ease 0s 1 normal none running none !important;&quot;&gt;&lt;div style=&quot;animation: auto ease 0s 1 normal none running none !important; height: 0px; width: 747px;&quot;&gt;&lt;div class=&quot;markdown-section-toolbar-internal&quot; style=&quot;border-radius: 4px; display: flex; gap: 4px; opacity: 0; position: absolute; right: 8px; top: 0px; transform: translateY(-55%); z-index: 303; animation: auto ease 0s 1 normal none running none !important;&quot;&gt;&lt;div class=&quot;markdown-section-toolbar-item light&quot; style=&quot;align-items: center; border-radius: 3px; color: var(--vscode-foreground); cursor: pointer; display: flex; height: 20px; justify-content: center; opacity: 0.3; position: relative; width: 20px; animation: auto ease 0s 1 normal none running none !important;&quot;&gt;&lt;span class=&quot;codicon codicon-reply&quot; style=&quot;animation: auto ease 0s 1 normal none running none !important; display: inline-block; font: 14px / 1 codicon; text-align: center; text-decoration: none; text-rendering: auto; text-transform: none; -webkit-font-smoothing: antialiased; user-select: none;&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;markdown-section-toolbar-item markdown-section-toolbar-copy light&quot; style=&quot;align-items: center; border-radius: 3px; color: var(--vscode-foreground); cursor: pointer; display: flex; height: 20px; justify-content: center; opacity: 0.3; position: relative; width: 20px; animation: auto ease 0s 1 normal none running none !important; pointer-events: auto;&quot;&gt;&lt;span class=&quot;codicon codicon-copy&quot; style=&quot;animation: auto ease 0s 1 normal none running none !important; display: inline-block; font: 14px / 1 codicon; text-align: center; text-decoration: none; text-rendering: auto; text-transform: none; -webkit-font-smoothing: antialiased; user-select: none;&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;span style=&quot;margin-top: 0px;&quot;&gt;最&lt;/span&gt;&lt;span&gt;终会调用到 ServletWebServerApplicationContext&lt;/span&gt;&lt;span&gt;#onRefresh 方法，这个&lt;/span&gt;&lt;span&gt;方法内会调用 createWeb&lt;/span&gt;&lt;span&gt;Server 来创建并启动内&lt;/span&gt;&lt;span&gt;嵌的 Web 服务器&lt;/span&gt;&lt;span&gt;（如 Tomcat、Jetty 或&lt;/span&gt;&lt;span style=&quot;margin-bottom: 0px;&quot;&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;Undertow&lt;/span&gt;&lt;/section&gt;" style="text;whiteSpace=wrap;html=1;fontFamily=Helvetica;fontSize=18;fontColor=default;" vertex="1" parent="1">
          <mxGeometry x="-820" y="-560" width="560" height="140" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
